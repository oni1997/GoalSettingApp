@* Toast Notification Component *@
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
    @if (IsVisible)
    {
        <div class="toast show align-items-center border-0 @GetToastClass()" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <strong>@GetIcon()</strong> @Message
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" @onclick="Hide"></button>
            </div>
        </div>
    }
</div>

@code {
    [Parameter] public string Message { get; set; } = string.Empty;
    [Parameter] public ToastType Type { get; set; } = ToastType.Info;
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public EventCallback OnHidden { get; set; }

    private string GetToastClass()
    {
        return Type switch
        {
            ToastType.Success => "text-bg-success",
            ToastType.Error => "text-bg-danger",
            ToastType.Warning => "text-bg-warning",
            ToastType.Info => "text-bg-info",
            _ => "text-bg-info"
        };
    }

    private string GetIcon()
    {
        return Type switch
        {
            ToastType.Success => "✓",
            ToastType.Error => "✗",
            ToastType.Warning => "⚠",
            ToastType.Info => "ℹ",
            _ => "ℹ"
        };
    }

    protected override async Task OnParametersSetAsync()
    {
        if (IsVisible)
        {
            await Task.Delay(4000); // Auto-hide after 4 seconds
            await Hide();
        }
    }

    private async Task Hide()
    {
        IsVisible = false;
        await OnHidden.InvokeAsync();
        StateHasChanged();
    }

    public enum ToastType
    {
        Success,
        Error,
        Warning,
        Info
    }
}
